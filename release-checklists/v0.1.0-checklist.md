# v0.1.0 Release Checklist

This checklist is organized by automation level, from fully automatic to human-required.

---

## Category 1: CI Tests (Fully Automatic)

These run automatically on every push/PR via GitHub Actions.

- [x] Backend lint passes (`ruff check .`)
- [x] Backend type check passes (`mypy app --ignore-missing-imports`)
- [x] Backend tests pass (`pytest -v --tb=short`) - 56 passed
- [x] Frontend lint passes (`npm run lint`) - 0 errors, 18 warnings
- [x] Frontend build passes (`npm run build`)
- [x] Docker image builds successfully

**Verify at:** https://github.com/seethroughlab/familiar/actions

---

## Category 2: Local Automated Tests (Claude Code / Playwright)

These tests run locally and don't require human judgment.

### 2.1 Docker Environment

- [x] Containers start: `docker compose -f docker/docker-compose.local.yml up -d`
- [x] All services show "Up" and "healthy"
- [x] No critical errors in logs

### 2.2 API Health Checks

- [x] Health endpoint returns `{"status": "healthy"}`
- [x] Tracks endpoint responds
- [x] Settings API returns object
- [x] Profiles list returns array
- [x] Library scan starts and reports status

### 2.3 Backend Tests (Local)

- [x] All pytest tests pass (56 passed)

### 2.4 Frontend Build (Local)

- [x] Build completes without errors

### 2.5 Playwright E2E Tests (No API Keys)

Run: `cd frontend && npm run test:e2e`

#### Audio Playback
- [x] Click a track - audio plays
- [x] Play/pause button toggles playback
- [x] Progress bar shows current position
- [x] Clicking progress bar seeks
- [x] Volume slider changes volume
- [x] Next/previous track buttons work
- [x] Shuffle mode works
- [x] Repeat mode works

#### Playlists
- [x] Create new playlist
- [x] Rename playlist
- [x] Delete playlist
- [x] Add tracks to playlist
- [x] Queue displays correctly
- [x] Drag to reorder tracks

#### Profiles
- [x] Profile selector appears on load
- [x] Create new profile
- [x] Settings has profile section
- [x] Select existing profile

#### Settings & Admin
- [x] Settings page loads
- [x] Library grid/list view toggle
- [x] Admin page loads
- [x] Claude API key field exists
- [x] Per-section save buttons exist
- [x] Spotify/Last.fm sections exist
- [x] AI Provider section exists

#### UI Elements
- [x] Album artwork displays
- [x] Visualizer tab opens
- [x] No console errors on load
- [x] Main navigation tabs work

---

## Category 3: Playwright E2E Tests (With API Keys)

These tests run automatically in CI with GitHub Secrets, or locally with env vars.

**CI:** Configured in `.github/workflows/ci.yml` - add secrets to GitHub repo settings.

**Local:**
```bash
ANTHROPIC_API_KEY=sk-ant-... \
SPOTIFY_CLIENT_ID=xxx SPOTIFY_CLIENT_SECRET=xxx \
LASTFM_API_KEY=xxx LASTFM_API_SECRET=xxx \
npm run test:e2e
```

### 3.1 AI Chat (Requires ANTHROPIC_API_KEY)

- [x] Add Anthropic API key in Admin panel
- [x] Key saves successfully (shows "Configured")
- [x] Send "Play something upbeat" - AI responds
- [x] AI creates playlist that starts playing
- [x] Chat disabled when no API key configured

### 3.2 Spotify Integration (Requires SPOTIFY_CLIENT_ID/SECRET)

- [ ] Add Spotify client ID/secret in Admin panel
- [ ] Credentials save successfully
- [ ] "Connect to Spotify" button appears

### 3.3 Last.fm Integration (Requires LASTFM_API_KEY/SECRET)

- [ ] Add Last.fm API key/secret in Admin panel
- [ ] Credentials save successfully
- [ ] "Connect Last.fm" button appears

---

## Category 4: Human Testing Required

These tests require human senses, judgment, or interactive flows that can't be automated.

### 4.1 Audio Quality (Human Ears)

- [ ] Audio sounds correct (not distorted, correct speed)
- [ ] Gapless playback between tracks (no gaps or clicks)

### 4.2 Visual Inspection (Human Eyes)

- [ ] UI loads without visual glitches
- [ ] Visualizer responds to audio frequencies
- [ ] Album artwork looks correct (not stretched/cropped)

### 4.3 AI Response Quality (Human Judgment)

- [ ] AI responses are relevant and helpful
- [ ] Playlist recommendations match the request mood/genre

### 4.4 OAuth Flows (Interactive Browser)

#### Spotify
- [ ] OAuth flow opens Spotify login
- [ ] After auth, shows "Connected as [username]"
- [ ] "Sync Favorites" starts sync task with progress
- [ ] Matched/unmatched counts display after sync
- [ ] Disconnect button works

#### Last.fm
- [ ] OAuth flow completes
- [ ] Shows "Connected as [username]"
- [ ] Play a track for 30+ seconds
- [ ] Check last.fm profile - scrobble appears

### 4.5 PWA & Offline (Requires HTTPS + Device)

- [ ] Install app prompt appears (requires HTTPS)
- [ ] App installs to home screen/desktop
- [ ] Cache a playlist for offline
- [ ] Disconnect network - cached tracks still play
- [ ] Media controls on lock screen work

### 4.6 Platform Testing

- [ ] Docker on x86 Linux/Mac/Windows
- [ ] OpenMediaVault installation per README
- [ ] Synology NAS via Container Manager
- [ ] ARM64 with `DISABLE_CLAP_EMBEDDINGS=true`

### 4.7 Listening Sessions (WebRTC) - DEFERRED TO v0.1.1

> **Note:** Listening sessions require a public signaling server.
> Feature is hidden in v0.1.0 UI. Re-enable when signaling server is deployed.

---

## Pre-Release Final Checks

- [x] CHANGELOG.md updated
- [x] README.md accurate and up-to-date
- [x] No console errors in browser DevTools
- [ ] No ERROR level logs in container output
- [x] CI passes on master branch
- [ ] Git tag created: `git tag v0.1.0`
- [ ] GitHub release created with release notes

---

## Test Summary

| Category | Tests | Where | Status |
|----------|-------|-------|--------|
| CI Core (lint, build, unit) | 6 | GitHub Actions | âœ… Auto |
| E2E (no keys) | ~25 | GitHub Actions | âœ… Auto |
| E2E (with API keys) | ~10 | GitHub Actions + Secrets | âœ… Auto |
| Human Required | ~15 | Manual | ðŸ“‹ Manual |

**GitHub Secrets to configure:**
- `ANTHROPIC_API_KEY` - For AI chat tests
- `SPOTIFY_CLIENT_ID` / `SPOTIFY_CLIENT_SECRET` - For Spotify tests
- `LASTFM_API_KEY` / `LASTFM_API_SECRET` - For Last.fm tests

**To run locally:**
```bash
# Start e2e environment
docker compose -f docker/docker-compose.e2e.yml up -d

# Run all tests with API keys
ANTHROPIC_API_KEY="sk-ant-..." npm run test:e2e
```
